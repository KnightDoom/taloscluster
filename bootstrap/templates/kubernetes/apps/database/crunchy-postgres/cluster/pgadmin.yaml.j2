# apiVersion: postgres-operator.crunchydata.com/v1beta1
# kind: PGAdmin
# metadata:
  # name: pgadmin
# spec:
  # users:
  # - username: "pgadmin@talos.com"
    # role: Administrator
    # passwordRef:
      # name: pgadmin-password-secret
      # key: password
  # dataVolumeClaimSpec:
    # storageClassName: longhorn-static
    # accessModes:
    # - "ReadWriteOnce"
    # resources:
      # requests:
        # storage: 1Gi
  #
  #serverGroups:
  #- name: supply
    #postgresClusterSelector: {}
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: pgadmin-ingress
  namespace: database
spec:
  ingressClassName: internal
  rules:
    - host: pgadmin.${SECRET_DOMAIN}
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: postgres-pgadmin
                port:
                  number: 5050
